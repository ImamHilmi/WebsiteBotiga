'use strict';(function(a,g,e){const f={topOffset:"50%",isFrameLoading:!1,lightboxOpen:!1,doOnOrientationChange(){f.lightboxOpen&&setTimeout(function(){f.topOffset=window.scrollTop;a("#post-lightbox-wrap").animate({top:f.topOffset},300)},300)},addToBasket(){const a=g.createElement("div"),e=g.createElement("h3"),b=g.createElement("a"),c=g.createElement("a");a.className="tf_textc lightbox-added";e.textContent=themifyScript.lng.add_to;b.className="button outline";b.href="#";b.textContent=themifyScript.lng.keep_shop;
b.addEventListener("click",this.closeLightBox,{once:!0});c.href=themifyScript.checkout_url;c.className="button checkout";c.textContent=themifyScript.lng.checkout;a.appendChild(e);a.appendChild(b);a.appendChild(c);return a},init(){const d=g.createDocumentFragment(),l=e.body,b=g.createElement("div"),c=g.createElement("div"),k=g.createElement("div"),h=g.createElement("a");b.id="post-lightbox-wrap";b.className="tf_hide tf_scrollbar";c.id="pattern";c.className="tf_hide tf_w tf_h";k.id="post-lightbox-container";
k.className="tf_box tf_w tf_overflow";h.className="close-lightbox";h.href="#";c.addEventListener("click",this.closeLightBox);h.addEventListener("click",this.closeLightBox);b.appendChild(h);b.appendChild(k);d.appendChild(b);d.appendChild(c);l[0].appendChild(d);g.addEventListener("keyup",this.keyUp,{passive:!0});e.isTouch&&window.addEventListener("orientationchange",this.doOnOrientationChange,{passive:!0});l.on("click",".themify-lightbox",this.clickLightBox).on("added_to_cart",function(){f.lightboxOpen&&
(a("#post-lightbox-wrap").addClass("lightbox-message"),a("#post-lightbox-container").slideUp(400,function(){a(this).empty();this.appendChild(f.addToBasket());a(this).slideDown()}))})},clickLightBox(d){d.preventDefault();if(f.isFrameLoading)return!1;let l=a(this).prop("href");var b=a(this).closest(".product,.slide-inner-wrap");d=b.find(".product-image img,.post-image img");let c=a("#post-lightbox-container"),k=a("#post-lightbox-wrap"),h=e.body;b=b.find(".product-image,.post-image");let m;d=d.length?
d.prop("src"):a(this).data("image");d="undefined"!==typeof d?d:themifyScript.placeholder;b=b.length?b:a(this).closest(".type-product");m=180>b.outerWidth(!0)?b.outerWidth(!0):180;e.initWC(!0);a(".themibox-clicked").removeClass("themibox-clicked");a(this).addClass("themibox-clicked");f.isFrameLoading=!0;h.addClass("post-lightbox").css("overflow-y","hidden");k.hide().removeClass("lightbox-message").addClass("post-lightbox-prepare woocommerce");c.html('<div class="post-lightbox-iframe"><div class="post-lightbox-main-image"><img src="'+
d+'"/></div></div>');k.css({width:b.outerWidth(!0),height:b.outerHeight(!0),top:b.offset().top-a(window).scrollTop()+b.outerHeight(!0)/2,left:b.offset().left-a(window).scrollLeft()+parseInt(b.outerWidth(!0)/2)}).fadeIn().animate({width:m,top:"50%",left:"50%"},"fast",function(){a.ajax({url:e.UpdateQueryString("post_in_lightbox","1",l),beforeSend:function(){a("#pattern").hide().fadeIn(300);c.addClass("post-lightbox-flip-infinite")},success:function(b){let d=!0;e.imagesLoad(a('<div class="post-lightbox-temp" id="post-lightbox-wrap"><div id="post-lightbox-container"><div class="post-lightbox-iframe">'+
b+"</div></div></div>").prependTo("body"),function(){const l=a("#post-lightbox-wrap.post-lightbox-temp").outerHeight(!0);a("#post-lightbox-wrap.post-lightbox-temp").remove();let h=g.getElementsByClassName("pswp")[0];c.children(".post-lightbox-iframe").append(b);const m=c[0].getElementsByClassName("share-wrap");0<m.length&&void 0===e.cssLazy.theme_social_share&&e.LoadCss(themify_vars.theme_url+"/styles/wc/modules/social-share.css",themify_vars.theme_v,g.getElementById("themify_concate-css").nextElementSibling,
null,function(){e.fontAwesome(m[0]);e.cssLazy.theme_social_share=!0});h||(h=c[0].getElementsByClassName("pswp")[0])&&e.body[0].prepend(h);c.one("animationiteration",function(){d&&(d=!1,a(this).removeClass("post-lightbox-flip-infinite"),k.addClass("animate_start").animate({width:960,height:l},"normal",function(){"mobile"===e.device&&(f.topOffset=a(window).scrollTop()+10);f.isFrameLoading=!1;f.lightboxOpen=!0;a(this).removeClass("post-lightbox-prepare animate_start");e.trigger("themiboxloaded",this).initWC(!0)}))})})}})})},
closeLightBox(d){d.preventDefault();f.lightboxOpen&&a("#pattern").fadeOut(300,function(){const d=a("#post-lightbox-wrap"),b=function(){a(".post-lightbox-iframe").empty();e.body.removeClass("post-lightbox").css("overflow-y","visible");e.trigger("themiboxclosed");f.lightboxOpen=!1};if(d.hasClass("lightbox-message"))d.animate({top:"150%"},500,b);else{let c=a(".themibox-clicked").closest(".type-product,.slide-inner-wrap").find(".product-image,.post-image");c=c.length?c:a(".themibox-clicked").closest(".type-product");
d.addClass("animate_start post-lightbox-prepare animate_closing").animate({width:c.outerWidth(!0),height:c.outerHeight(!0)},"normal",function(){a(this).find("#pagewrap").remove();a(this).removeClass("animate_start animate_closing woocommerce").delay(100).animate({top:c.offset().top-a(window).scrollTop()+c.outerHeight(!0)/2,left:c.offset().left-a(window).scrollLeft()+parseInt(c.outerWidth(!0)/2)},"normal",function(){a(this).fadeOut();b()})})}})},keyUp(d){f.lightboxOpen&&27===d.keyCode&&a(".close-lightbox").click()}};
e.on("themify_theme_themibox_run",function(){f.init()},!0)})(jQuery,document,Themify);
